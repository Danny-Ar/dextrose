var _this=this;var _snapper=require("./snapper");var _snapper2=_interopRequireDefault(_snapper);var _path=require("path");var _path2=_interopRequireDefault(_path);var _wd=require("wd");var _wd2=_interopRequireDefault(_wd);var _setup=require("@times-components/fructose/setup");var _setup2=_interopRequireDefault(_setup);var _index=require("./client/index");var _index2=_interopRequireDefault(_index);var _logger=require("./logger");var _logger2=_interopRequireDefault(_logger);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var setUpAppium=function setUpAppium(){var driver,options;return regeneratorRuntime.async(function setUpAppium$(_context){while(1){switch(_context.prev=_context.next){case 0:driver=_wd2.default.promiseChainRemote({host:"localhost",port:4723});options={desiredCapabilities:{autoGrantPermissions:true,browserName:"",platformName:"Android",platformVersion:"7.1.1",deviceName:"Android Emulator",app:_path2.default.join(__dirname,"../android/app/build/outputs/apk/app-debug.apk")},host:"localhost",port:4723};global.driver=driver;_context.next=5;return regeneratorRuntime.awrap(driver.init(options.desiredCapabilities).setImplicitWaitTimeout(300000));case 5:global.asserter=_wd2.default.asserters;return _context.abrupt("return",global.driver.waitForElementsByXPath('//*[@text="Fructose"]',global.asserter.isDisplayed,1800000));case 7:case"end":return _context.stop();}}},null,_this);};var setup=function setup(){var client,snapper,componentsLoaded;return regeneratorRuntime.async(function setup$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return regeneratorRuntime.awrap(_setup2.default.hooks.mobile.setup());case 2:client=(0,_index2.default)(7811);_context3.next=5;return regeneratorRuntime.awrap(setUpAppium());case 5:snapper=new _snapper2.default("android");_context3.next=8;return regeneratorRuntime.awrap(client.getLoadedComponents());case 8:componentsLoaded=_context3.sent;_logger2.default.info('setup',componentsLoaded);componentsLoaded.map(function _callee(component){return regeneratorRuntime.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return regeneratorRuntime.awrap(client.loadComponent(component));case 2:snapper.snap(__dirname+component);case 3:case"end":return _context2.stop();}}},null,_this);});case 11:case"end":return _context3.stop();}}},null,_this);};setup();